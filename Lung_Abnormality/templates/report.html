{% extends "Navbar.html" %}
{% block content %}
<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Lung Disease Detection</title>

  <link rel="stylesheet" href="/static/css/styles.css">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet"
    integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js"
    integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM"
    crossorigin="anonymous"></script>
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.2.1/css/fontawesome.min.css"
    integrity="sha384-QYIZto+st3yW+o8+5OHfT6S482Zsvz2WfOzpFSXMF9zqeLcFV0/wlZpMtyFcZALm" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css" />
  <script src="https://cdn.jsdelivr.net/npm/flatpickr@4.6.9/dist/flatpickr.min.js"></script>
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/flatpickr@4.6.9/dist/flatpickr.min.css">

</head>



<body>

  <section id="Analysis">

    <div class="dropdrown">
      <form class="form-inline" id="form-inline" style="padding-left: 3px;" action="/getdata" method="POST">
        <h4 style="color:rgb(20, 49, 77)">Search for a Report ?</h4>
        <div class="row " style="padding-top:10px; ">
          <div class="col-md-4">
            <select class="form-control" name="patient_id" id="patient_id" required>
              <option disabled selected>-- Select Option --</option>

              <option value="245678901231">John - 245678901231 </option>
              <option value="884567245612">Elvis - 884567245612 </option>
              <option value="342567819042">Frank - 342567819042 </option>
              <option value="102938475610">James - 102938475610 </option>
              <option value="123456789888">Cary - 123456789888 </option>
              <option value="098765432109">Aretha - 098765432109 </option>
              <option value="89076566711">Jhonathon - 89076566711 </option>
              <option value="123456780118">Angel - 123456780118 </option>
              <option value="123456781118">Fred - 123456781118 </option>
              <option value="123456781188">Daniel - 123456781188 </option>
              <option value="123456781448">Vin - 123456781448 </option>
              <option value="345678901666">Alexis - 345678901666 </option>
        
            </select>

          </div>
          <div class="col-md-4 ">
            <button type="submit" class="btn btn-primary mb-2" href="#report">Submit</button>
          </div>
          <br>
      </form>
    </div>
    {% if img1 or img %}
    <br>
    <section id="report">
      <div class="reportcard">
        <!-- <div class="row"style="margin-right:0px;important;padding-right:0px;width: 718px;" >
        <div class="card3" style="width:800px;">
          <div class="card-body6">Name: {{patient_name}}</div>
        </div>
      </div> -->
        <br>
        <div class="row">
          <div class="col-md-5">

            <div class="image-box" style="padding-top: 10px;">
              {% if img %}
              <img src="{{ img }}">
              {% else %}
              <img src="data:image/{{ image_format }};base64,{{ img1 }}">
              {% endif %}
            </div>
          </div>
          <div class="col-md-6">
            <div class="row" style="width: 425px;">
              <div class="card4">

                <div class="card-body7"><b>Name : </b>{{patient_name}}</div>
              </div>
            </div>

            <div class="row" style="width: 425px;padding-top: 20px;">

              <div class="card4 col-md-6 ">

                <div class="card-body7"><b>Age :</b> <span id="age"></span></div>
              </div>
              <div class="card4 col-md-6">
                <div class="card-body7"><b>Gender : </b>{{Gender}}</div>
              </div>
            </div>
            <br>

            <!-- <div class="row" style="width: 425px;">
            <div class="card4">
              <div class="card-body7"><b>Gender : </b>{{Gender}}</div>
            </div>
          </div>
          <br> -->

            <div class="row" style="width: 425px;">
              <div class="card4">
                <div class="card-body7"><b>Date of Test :</b> {{ date }}</div>
              </div>
            </div>
            <br>
            <div class="row">
              <div class="col-md-6">
                <div class="card5">
                <div class="card-body8" style="background-color:{% if result1 >50 %}
                        #f55d6c;color: white
                      {% elif result1 <20 %}
                      #85ed79;
                      {% else %}
                      #f9fc90;
                      {% endif %}
                    ">
                  <b>Pneumonia :</b> {{result1}} %
                </div>
              </div>
                <!-- <div class="card5" >
                  <div class="sc-gauge" >
                    <div class="sc-background">
                      <div class="sc-percentage" style="background-color:
                      {% if result1/1.8 > 50 %}
                        #f55d6c;color: white;
                      {% elif result1/1.8 < 20 %}
                        #85ed79;
                      {% else %}
                      #e7ee06;
                      {% endif %}
                      transform: rotate({{ result1 }}deg);"></div>
                      <div class="sc-mask" ></div>
                      <span class="sc-value">{{ '%.2f' % (result1/1.8) }}</span>
                      <span class="sc-value" style="font-size:15px;padding-top:30px;">Pneumonia</span>

                    </div>

                    <span class="sc-min">0</span>
                    <span class="sc-max">100</span>
                  </div>
                </div> -->

              </div>


              <div class="col-md-6">
                <div class="card5" style="width:240px">
                  <div class="card-body8" style="background-color:
                        {% if result2 > 50 %}
                        #f55d6c;color: white
                        {% elif result2 < 20 %}
                        #85ed79;
                        {% else %}
                        #f9fc90;
                        {% endif %}
                      ">
                    <b>Tuberculosis :</b> {{result2}} %
                  </div>
                </div>
                <!-- <div class="card5">
                  <div class="sc-gauge" style="padding-left: 10px;">
                    <div class="sc-background">
                      <div class="sc-percentage" style="background-color:
                      {% if result2/1.8 > 50 %}
                        #f55d6c;color: white;
                      {% elif result2/1.8 < 20 %}
                        #85ed79;
                      {% else %}
                      #e7ee06;
                      {% endif %}
                      transform: rotate({{ result2 }}deg);"></div>
                      <div class="sc-mask" ></div>
                      <span class="sc-value">{{ '%.2f' % (result2/1.8) }}</span>
                      <span class="sc-value" style="font-size:15px;padding-top:30px;">Tuberculosis</span>

                    </div>

                    <span class="sc-min">0</span>
                    <span class="sc-max">100</span>
                  </div>
                </div> -->


              </div>
            </div>


            <br>

            <div class="row">
              <div class="col-md-6">
                <div class="card5">
                  <div class="card-body8" style="background-color:{% if result3 >50 %}
                        #f55d6c;color: white
                      {% elif result3 <20 %}
                      #85ed79;
                      {% else %}
                      #f9fc90;
                      {% endif %}
                    ">
                    <b>Cancer :</b> {{result3}} %
                  </div>
                </div>
                <!-- <div class="card5">
                  <div class="sc-gauge">
                    <div class="sc-background">
                      <div class="sc-percentage" style="background-color:
                      {% if result3/1.8 > 50 %}
                        #f55d6c;color: white;
                      {% elif result3/1.8 < 20 %}
                        #85ed79;
                      {% else %}
                      #e7ee06;
                      {% endif %}
                      transform: rotate({{ result3 }}deg);"></div>
                      <div class="sc-mask" ></div>
                      <span class="sc-value">{{ '%.2f' % (result3/1.8) }}</span>
                      <span class="sc-value" style="font-size:15px;padding-top:30px;">Cancer</span>

                    </div>

                    <span class="sc-min">0</span>
                    <span class="sc-max">100</span>
                  </div>
                </div> -->


              </div>

              <div class="col-md-6">
                <div class="card5" style="width:240px">
                  <div class="card-body8" style="background-color:
                        {% if result4 > 50 %}
                        #f55d6c;color: white
                        {% elif result4 < 20 %}
                        #85ed79;
                        {% else %}
                        #f9fc90;
                        {% endif %}
                      ">
                    <b>Covid19 :</b> {{result4}} %
                  </div>
                </div>
                <!-- <div class="card5">
                  <div class="sc-gauge" style="padding-left:10px;">
                    <div class="sc-background">
                      <div class="sc-percentage" style="background-color:
                      {% if result4/1.8 > 50 %}
                        #f55d6c;color: white;
                      {% elif result4/1.8 < 20 %}
                        #85ed79;
                      {% else %}
                      #e7ee06;
                      {% endif %}
                      transform: rotate({{ result4 }}deg);"></div>
                      <div class="sc-mask" ></div>
                      <span class="sc-value">{{ '%.2f' % (result4/1.8) }}</span>
                      <span class="sc-value" style="font-size:15px;padding-top:30px;">Covid-19</span>

                    </div>

                    <span class="sc-min">0</span>
                    <span class="sc-max">100</span>
                  </div>
                </div> -->
              </div>
            </div>
          </div>

        </div>
        {% endif %}
    </section>
  </section>

  <script>


    function calculateAge(dob) {
      var today = new Date();
      var birthDate = new Date(dob);
      var age = today.getFullYear() - birthDate.getFullYear();
      var monthDiff = today.getMonth() - birthDate.getMonth();
      if (monthDiff < 0 || (monthDiff === 0 && today.getDate() < birthDate.getDate())) {
        age--;
      }
      return age;
    }
    var dob = '{{patient_dob}}';  // Replace with the actual DOB variable value
    var ageElement = document.getElementById("age");
    ageElement.innerText = calculateAge(dob);

  </script>
  {% endblock %}
</body>

</html>